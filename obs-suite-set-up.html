

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Observation suite set up and directories overview &mdash; C3S-marine-obs-suite v1.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Release workflow" href="release-workflow.html" />
    <link rel="prev" title="C3S marine-obs-suite documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> C3S-marine-obs-suite
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Observation suite set up and directories overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-workflow.html">Release workflow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-workflow.html#configuration-directory-set-up">Configuration directory set up</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-workflow.html#make-release-source-tree">Make release source tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-workflow.html#run-level1a">Run level1a</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="adding-new-data-models.html">Adding new data models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build-new-schema.html">1. Build and add a mdf_reader schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="build-new-schema.html#set-up-your-script">1.1 Set up your script</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-schema.html#copy-files-from-a-pre-existent-data-model">1.2 Copy files from a pre-existent data model</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-schema.html#modify-the-imma1-d704-json-file">1.3 Modify the <code class="docutils literal notranslate"><span class="pre">imma1_d704.json</span></code> file</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-schema.html#add-the-code-tables">1.4 Add the <code class="docutils literal notranslate"><span class="pre">code_tables</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-schema.html#re-start-your-python-environment">1.5 Re-start your python environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-schema.html#add-to-your-python-script-the-new-schema">1.6 Add to your python script the new schema</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="build-new-cdm-mapper.html">2. Build and add a cdm-mapper</a><ul>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#set-up-your-script">2.1 Set up your script</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#copy-files-from-a-pre-existent-data-model-mapper">2.2 Copy files from a pre-existent data model mapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#modify-the-header-table">2.3 Modify the header table</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#modify-the-observations-tables">2.4 Modify the observations tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#add-code-tables-needed">2.5 Add <code class="docutils literal notranslate"><span class="pre">code_tables</span></code> needed</a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#add-the-functions-needed-to-the-icoads-r3000-d704-py">2.6 Add the functions needed to the <code class="docutils literal notranslate"><span class="pre">icoads_r3000_d704.py</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="build-new-cdm-mapper.html#test-your-new-cdm-mapper">2.7 Test your new CDM mapper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="last-steps.html">3. Commit and push changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="last-steps.html#clone-the-latest-version-of-the-modified-tools">4. Clone the latest version of the modified tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="last-steps.html#run-level1a-for-that-new-sid-dck-cdm">5. Run level1a for that new sid-dck CDM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="issues-with-data-models.html">Issues with data models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="issues-with-data-models.html#missing-code-tables">Missing <code class="docutils literal notranslate"><span class="pre">code_tables</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="issues-with-data-models.html#exclusion-of-data">Exclusion of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="issues-with-data-models.html#invalid-data">Invalid data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="autoapi/lotus_scripts/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/lotus_scripts/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/array_output_hdlr/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.array_output_hdlr</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/level1a_slurm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.level1a_slurm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/level1b_slurm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.level1b_slurm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/level1c_slurm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.level1c_slurm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/level1d_slurm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.level1d_slurm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/level1e_slurm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.level1e_slurm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/level2_slurm/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.level2_slurm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/lotus_scripts/lotus_paths/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lotus_scripts.lotus_paths</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/level1d/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">level1d</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1d/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1d/index.html#on-input-data">On input data:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1d/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1d/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1d/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1d/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/noc_duplicates_merge/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">noc_duplicates_merge</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/noc_duplicates_merge/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/noc_duplicates_merge/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/noc_duplicates_merge/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/noc_duplicates_merge/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/level1c/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">level1c</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1c/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1c/index.html#notes-on-validations">Notes on validations:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1c/index.html#dev-notes">Dev notes:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1c/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1c/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1c/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1c/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/level1e/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">level1e</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1e/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1e/index.html#on-expected-format-and-content-of-qc-files">On expected format and content of QC files:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1e/index.html#report-quality-flag-rules">report_quality flag rules:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1e/index.html#dev-notes">Dev NOTES:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1e/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1e/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1e/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1e/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/level1b/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">level1b</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1b/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1b/index.html#configfile-includes">configfile includes:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1b/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1b/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1b/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1b/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/level1a/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">level1a</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1a/index.html#on-input-data">On input data:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1a/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1a/index.html#configfile">configfile:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level1a/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1a/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1a/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level1a/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/level2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">level2</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level2/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level2/index.html#uses-level2-list">Uses level2_list:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/level2/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level2/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level2/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/level2/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="autoapi/make_release_source_tree/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">make_release_source_tree</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="autoapi/make_release_source_tree/index.html#inargs">Inargs:</a></li>
<li class="toctree-l3"><a class="reference internal" href="autoapi/make_release_source_tree/index.html#module-contents">Module Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoapi/make_release_source_tree/index.html#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoapi/make_release_source_tree/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">C3S-marine-obs-suite</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Observation suite set up and directories overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/obs-suite-set-up.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="observation-suite-set-up-and-directories-overview">
<span id="obs-suite-set-up"></span><h1>Observation suite set up and directories overview<a class="headerlink" href="#observation-suite-set-up-and-directories-overview" title="Permalink to this headline">¶</a></h1>
<ol class="arabic">
<li><p>Clone the latest version of the <a class="reference external" href="https://github.com/glamod/glamod-marine-processing">glamod-marine-processing</a> repository to a user workspace in the <a class="reference external" href="https://help.jasmin.ac.uk/category/158-getting-started">JASMIN Cluster service</a>, most of the processing for the C3S project has taken place in the following directory <code class="docutils literal notranslate"><span class="pre">/gws/smf/j04/c3s311a_lot2</span></code>, once there, you can type the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir work_user_dir
$ cd work_user_dir
$ git clone git@github.com:glamod/glamod-marine-processing.git
$ cd glamod-marine-processing/
$ ls
   config-suite  docs  metadata-suite  obs-suite  pre-processing  qc-suite
</pre></div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before you do step 2, make sure to deactivate any <strong>conda environment</strong> that you might have in your JASMIN user directory by typing the command <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">deactivate</span></code>, this in the case that you have previously installed your own conda outside of the tools that JASMIN provides i.e, jaspy. If you have never use your own conda, you can ignore this warning.</p>
</div>
<ol class="arabic" start="2">
<li><p>Set up the obs-suite python environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd obs-suite/pyenvs
$ module load jaspy
$ virtualenv --system-site-packages env0
$ source env0/bin/activate
(env0)$ pip install -r requirements_env0.txt
</pre></div>
</div>
</li>
<li><p>Install all additional modules, coded specifically for the C3s processing. Make sure to activated your python environment (env0) before cloning any repository. From these modules listed below, only two have been updated and documented, the <a class="reference external" href="https://glamod.github.io/mdf_reader_documentation/">mdf_reader</a> and <a class="reference external" href="https://glamod.github.io/cdm_mapper_documentation/">cdm_mapper</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(env0)$ cd obs-suite/modules/python
(env0)[python]$ git clone git@github.com:glamod/mdf_reader.git --branch master
(env0)[python]$ git clone git@github.com:glamod/cdm-mapper.git --branch master --single-branch cdm
(env0)[python]$ git clone git@github.com:glamod/metmetpy.git --branch v1.0
(env0)[python]$ git clone git@github.com:glamod/pandas_operations.git --branch v1.2
(env0)[python] $ ls
cdm  mdf_reader  metmetpy  pandas_operations
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The attribute <code class="docutils literal notranslate"><span class="pre">--branch</span></code> is needed to clone a specific version of the code and <code class="docutils literal notranslate"><span class="pre">--single-branch</span></code> is only important for the <strong>cdm_mapper</strong> repository, since denotes how the modules are name in all the scripts of the code. The module name of the <strong>cdm_mapper</strong> repo inside the code is <strong>cdm</strong>. By cloning things with the <code class="docutils literal notranslate"><span class="pre">--single-branch</span></code> argument, you can only make changes to your local copy of the tool. You won’t be able to push commits to the online repository if you use the single branch option. This set up is for users only; to develop and modify the upstream repositories you should clone the repositories without the <code class="docutils literal notranslate"><span class="pre">--single-branch</span></code> in a separate folder, make your changes and then commit. <strong>But for running the C3S processing workflow the</strong> <code class="docutils literal notranslate"><span class="pre">--single-branch</span></code> <strong>is always needed to clone the cdm_mapper</strong>.</p>
</div>
<ol class="arabic simple" start="4">
<li><p>Set the paths to the input <code class="docutils literal notranslate"><span class="pre">data_directory</span></code>, <code class="docutils literal notranslate"><span class="pre">configuration_directory</span></code>, <code class="docutils literal notranslate"><span class="pre">environment_directory</span></code> and <code class="docutils literal notranslate"><span class="pre">code_directory</span></code>.</p></li>
</ol>
<p>Under <code class="docutils literal notranslate"><span class="pre">glamod-marine-processing/obs-suite/</span></code> there are two .sh files (<code class="docutils literal notranslate"><span class="pre">setenv0.sh</span></code> and <code class="docutils literal notranslate"><span class="pre">setpaths.sh</span></code>) that contain paths that link the python environment, input and output data and the obs-suite code. The first file that you need to modify is the <code class="docutils literal notranslate"><span class="pre">setpaths.sh</span></code> to let the code be aware of where everything is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vim setpaths.sh

#!/bin/bash
export home_directory=/gws/nopw/j04/glamod_marine
export home_directory_smf=/gws/smf/j04/c3s311a_lot2

# YOU ONLY NEED TO MODIFY THIS LINE!! and only the part that says work_user_dir or something else in case that
# you have store your glamod-marine-processing repository in another working space.
export code_directory=$home_directory_smf/work_user_dir/glamod-marine-processing/obs-suite

export config_directory=$home_directory_smf/code/marine_code/glamod-marine-config/obs-suite

## Below here you shouldn&#39;t need to modify anything!

export pyTools_directory=$code_directory/modules/python
export scripts_directory=$code_directory/scripts
export lotus_scripts_directory=$code_directory/lotus_scripts
export data_directory=$home_directory/data

echo &#39;Data directory is &#39;$data_directory
echo &#39;Code directory is &#39;$code_directory
echo &#39;Config directory is &#39;$config_directory
# Create the scratch directory for the user
export scratch_directory=/work/scratch-nopw/$(whoami)
if [ ! -d $scratch_directory ]
then
  echo &quot;Creating user $(whoami) scratch directory $scratch_directory&quot;
  mkdir $scratch_directory
else
  echo &quot;Scratch directory is $scratch_directory&quot;
fi
</pre></div>
</div>
<p>Most of the time the <code class="docutils literal notranslate"><span class="pre">home_directory</span></code>, <code class="docutils literal notranslate"><span class="pre">home_directory_smf</span></code> and <code class="docutils literal notranslate"><span class="pre">config_directory</span></code> will not change unless there is a requirement in JASMIN to move working spaces. The only path that you should modify from the file above should be <code class="docutils literal notranslate"><span class="pre">code_directory</span></code>.</p>
<p>After this you need to also change <code class="docutils literal notranslate"><span class="pre">setenv0.sh</span></code> to point to the environment created in steps 1-3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ vim setenv0.sh

pyEnvironment_directory=$code_directory/pyenvs/env0

# Activate python environment and add jaspy3.7 or any other version of jaspy to LD_LIBRARY_PATH
  so that cartopy and other python tools can find the geos library
source $pyEnvironment_directory/bin/activate
export PYTHONPATH=&quot;$pyTools_directory:${PYTHONPATH}&quot;

# ONLY MODIFY THE LINE BELOW, to point out to the right jaspy module that you want to use
export LD_LIBRARY_PATH=/apps/contrib/jaspy/miniconda_envs/jaspy3.7/m3-4.6.14/envs/jaspy3.7-m3-4.6.14-r20200606/lib/:$LD_LIBRARY_PATH
echo &quot;Python environment loaded from gws: $pyEnvironment_directory&quot;
</pre></div>
</div>
<ol class="arabic" start="5">
<li><p>Deactivate your environment and check the connection by sourcing both .sh files under <code class="docutils literal notranslate"><span class="pre">../obs-suite/</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ deactivate env0
$ module load jaspy
$ source setpaths.sh
$ source setenv0.sh
</pre></div>
</div>
</li>
</ol>
<p>The commands above will activate the paths and the environment. You will have to do step 5 every time you logging to a new jasmin session. Use <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$code_directory</span></code> or any dir name variable defined in <code class="docutils literal notranslate"><span class="pre">setpaths.sh</span></code> to navigate between all directories.</p>
<ol class="arabic" start="6">
<li><p>Explore the <code class="docutils literal notranslate"><span class="pre">$data_directory</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $data_directory
$ ls
    3          datasets           r092019      release_3.0  release_demo  user_manual
    dashboard  marine-user-guide  release_2.0  release_4.0  release_test
</pre></div>
</div>
</li>
</ol>
<p>Unless working spaces in jasmin change, this directory is where you will always find the output of every release, and also where the ICOADS unprocessed data is stored (see <code class="docutils literal notranslate"><span class="pre">/datasets/ICOADS_R3.0.0T/level0</span></code>). For each new release of ICOADS you will have the following directory tree:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>| release_4.0
| ├── ICOADS_R3.0.0T
| │   ├── level1a
| │   ├── level1b
| │   ├── level1c
| │   ├── level1d
| │   ├── level1e
| │   ├── level1f
| │   ├── level2
| │   └── metoffice_qc
| ├── ICOADS_R3.0.1T
| ├── NOC_corrections
| ├── wmo_publication_47
</pre></div>
</div>
<ol class="arabic" start="7">
<li><p>Explore the <code class="docutils literal notranslate"><span class="pre">$config_directory</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd $data_directory
$ ls
r092019-000000      release_3.0-000000  release_demo-000000
release_2.0-000000  release_4.0-000000  release_test-000000
</pre></div>
</div>
</li>
</ol>
<dl class="simple">
<dt>The configuration directory is where you define several <code class="docutils literal notranslate"><span class="pre">.json</span></code> and <cite>.txt</cite> files that will indicate to the <code class="docutils literal notranslate"><span class="pre">obs-suite</span></code> software the following:</dt><dd><ul class="simple">
<li><p>What sources and decks we would be processing?</p></li>
<li><p>Do we need to apply a specific schema and mapper to a deck or a number of decks?</p></li>
<li><p>What periods of data are we going to process?</p></li>
</ul>
</dd>
</dl>
<p><strong>Click on next to know more about how to set up a release and the configuration directory</strong></p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="release-workflow.html" class="btn btn-neutral float-right" title="Release workflow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="C3S marine-obs-suite documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, David Berry, Irene Perez Gonzalez and Beatriz Recinos.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>